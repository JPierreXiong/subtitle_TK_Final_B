# 人工测试清单

## 🚀 服务器启动

**访问地址**: http://localhost:3000

服务器正在启动中，请等待 15-20 秒后访问。

---

## 📋 测试清单

### 1. 基础功能测试 ✅

#### 页面加载
- [ ] 访问 http://localhost:3000
- [ ] 页面正常加载，无错误
- [ ] 检查浏览器控制台（F12）是否有错误

#### 用户认证
- [ ] 测试登录功能
- [ ] 检查用户信息显示
- [ ] 检查积分余额显示

---

### 2. 视频提取功能测试 ✅

#### TikTok 视频提取
- [ ] 输入 TikTok URL（例如：`https://www.tiktok.com/@user/video/1234567890`）
- [ ] 选择输出类型：**字幕** 或 **视频**
- [ ] 点击"提取"按钮
- [ ] **预期结果**：
  - ✅ 立即返回响应（应该在 200ms 内）
  - ✅ 显示任务 ID
  - ✅ 状态显示"处理中"或"pending"
  - ✅ 控制台显示日志信息

#### YouTube 视频提取
- [ ] 输入 YouTube URL
- [ ] 选择输出类型
- [ ] 点击"提取"按钮
- [ ] 验证同上

#### 状态更新检查
- [ ] 观察状态流转：`pending → downloading → processing → extracted`
- [ ] 检查进度条是否更新（0-100%）
- [ ] 检查字幕内容是否正确显示
- [ ] 检查视频元数据（标题、作者、点赞等）是否正确

---

### 3. QStash 异步处理测试（如果配置了 QStash）✅

#### 检查 QStash 集成
- [ ] 查看终端日志，确认任务已推送到 QStash
- [ ] 日志中应该显示：`[QStash] Task xxx pushed to queue`
- [ ] 访问 [Upstash Console](https://console.upstash.com/) 查看任务队列
- [ ] 确认 Worker 路由被调用（查看日志中的 Worker 处理信息）

#### 检查幂等性
- [ ] 如果 QStash 重试，检查是否触发幂等性检查
- [ ] 日志中应该显示：`[Idempotency] Task xxx already completed, skipping`

---

### 4. 翻译功能测试 ✅

#### 翻译字幕
- [ ] 等待提取完成（status: extracted）
- [ ] 选择目标语言（例如：中文、英语等）
- [ ] 点击"开始翻译"按钮
- [ ] **预期结果**：
  - ✅ 状态更新为 `translating`
  - ✅ 显示翻译进度
  - ✅ 翻译完成后状态为 `completed`
  - ✅ 显示翻译后的字幕内容

#### 翻译结果验证
- [ ] 检查翻译内容是否正确
- [ ] 检查时间戳格式是否保持
- [ ] 检查翻译后的字幕是否可下载

---

### 5. 下载功能测试 ✅

#### 字幕下载
- [ ] 测试下载原始字幕（SRT 格式）
- [ ] 测试下载翻译后的字幕（SRT 格式）
- [ ] 测试下载 CSV 格式
- [ ] 验证下载的文件内容是否正确

#### 视频下载（如果选择了视频输出）
- [ ] 测试视频下载功能
- [ ] 检查预签名 URL 是否有效
- [ ] 验证视频可以正常播放

---

### 6. 错误处理测试 ✅

#### 无效输入
- [ ] 输入无效 URL（应该显示错误提示）
- [ ] 不输入 URL 直接点击提取（应该显示验证错误）

#### 积分不足
- [ ] 如果积分不足，应该显示友好的错误提示
- [ ] 错误信息应该包含需要的积分数和当前积分

#### 任务失败
- [ ] 如果任务失败，应该显示错误信息
- [ ] 积分应该被正确回滚（如果已扣除）

---

### 7. UI/UX 测试 ✅

#### 响应速度
- [ ] 页面加载速度是否正常
- [ ] API 响应时间（应该在 200ms 内）
- [ ] 状态更新是否及时

#### 交互体验
- [ ] 按钮点击响应是否流畅
- [ ] 加载状态显示是否清晰
- [ ] 错误提示是否友好
- [ ] 成功提示是否明确

#### 视觉设计
- [ ] 布局是否合理
- [ ] 颜色搭配是否协调
- [ ] 字体大小是否合适
- [ ] 响应式设计（移动端/桌面端）

---

### 8. 性能测试 ✅

#### 内存监控
- [ ] 打开浏览器开发者工具
- [ ] 监控内存使用情况（Performance 标签）
- [ ] 检查是否有内存泄漏

#### 网络请求
- [ ] 查看 Network 标签
- [ ] 检查 API 请求是否正常
- [ ] 检查响应时间是否合理

---

## 🐛 常见问题检查

### 检查浏览器控制台
1. 打开开发者工具（F12）
2. 查看 Console 标签的错误信息
3. 查看 Network 标签的请求状态

### 检查终端日志
1. 查看服务器启动日志
2. 查看 API 请求日志
3. 查看错误信息

### 检查环境变量
- 确认 `.env.local` 文件存在
- 确认环境变量已正确加载
- 如果 QStash 未配置，应该 fallback 到直接处理

---

## 📊 测试记录表

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 页面加载 | ☐ | |
| 用户登录 | ☐ | |
| TikTok 提取 | ☐ | |
| YouTube 提取 | ☐ | |
| 状态更新 | ☐ | |
| QStash 集成 | ☐ | |
| 翻译功能 | ☐ | |
| 下载功能 | ☐ | |
| 错误处理 | ☐ | |
| UI/UX | ☐ | |

---

## ✅ 测试完成确认

- [ ] 所有功能测试通过
- [ ] 无严重错误
- [ ] 性能表现良好
- [ ] 用户体验良好

---

**测试开始时间**: _____________  
**测试人员**: _____________  
**测试环境**: 本地开发环境 (http://localhost:3000)
