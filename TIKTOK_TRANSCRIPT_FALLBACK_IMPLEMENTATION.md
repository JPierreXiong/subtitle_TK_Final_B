# TikTok Transcript é™çº§ç­–ç•¥å®ç°å®Œæˆ

## âœ… å®ç°çŠ¶æ€

**å·²å®Œæˆ**ï¼šåœ¨ä¸æ”¹å˜shipanyç»“æ„çš„å‰æä¸‹ï¼Œå®ç°äº†TikTokè½¬å½•APIçš„é™çº§ç­–ç•¥ï¼Œå‚è€ƒYouTubeçš„å®ç°æ–¹å¼ã€‚

---

## ğŸ“‹ å®ç°å†…å®¹

### 1. æ ¸å¿ƒåŠŸèƒ½

- âœ… **å…è´¹APIä¼˜å…ˆ**ï¼šå…ˆè°ƒç”¨å…è´¹APIï¼ˆTikTok Transcriptor API3ï¼‰
- âœ… **è‡ªåŠ¨é™çº§**ï¼šå…è´¹APIå¤±è´¥åè‡ªåŠ¨åˆ‡æ¢åˆ°ä»˜è´¹API
- âœ… **ä¸¥æ ¼è°ƒç”¨**ï¼šæ¯ä¸ªAPIåªè°ƒç”¨1æ¬¡ï¼Œç»ä¸é‡å¤
- âœ… **è¶…æ—¶æ§åˆ¶**ï¼šå…è´¹API 15ç§’è¶…æ—¶ï¼Œä»˜è´¹API 20ç§’è¶…æ—¶
- âœ… **å¤±è´¥åˆ¤æ–­**ï¼šä¸¥æ ¼çš„æˆåŠŸ/å¤±è´¥åˆ¤æ–­é€»è¾‘

### 2. ä¿®æ”¹çš„æ–‡ä»¶

**æ–‡ä»¶**ï¼š`src/extensions/media/rapidapi.ts`

**ä¿®æ”¹å†…å®¹**ï¼š
1. ä¿®æ”¹ `fetchTikTokMedia()` æ–¹æ³•ï¼Œå®ç°é™çº§ç­–ç•¥
2. æ–°å¢ `fetchTikTokTranscriptFreeAPI()` æ–¹æ³•ï¼ˆå…è´¹APIï¼‰
3. æ–°å¢ `fetchTikTokTranscriptPaidAPI()` æ–¹æ³•ï¼ˆä»˜è´¹APIï¼‰
4. ä¿ç•™åŸæœ‰ `fetchTikTokTranscript()` æ–¹æ³•ï¼ˆæ ‡è®°ä¸ºdeprecatedï¼Œä¿æŒå…¼å®¹ï¼‰

### 3. APIé…ç½®

#### API 1ï¼ˆå…è´¹ä¼˜å…ˆï¼‰

**ç«¯ç‚¹**ï¼š`https://tiktok-transcriptor-api3.p.rapidapi.com/index.php`

**æ–¹æ³•**ï¼šPOST

**Headers**ï¼š
```
Content-Type: application/json
x-rapidapi-host: tiktok-transcriptor-api3.p.rapidapi.com
x-rapidapi-key: {API_KEY}
```

**Body**ï¼š
```json
{
  "url": "https://www.tiktok.com/@username/video/1234567890"
}
```

**è¶…æ—¶**ï¼š15ç§’

---

#### API 2ï¼ˆä»˜è´¹å…œåº•ï¼‰

**ç«¯ç‚¹**ï¼š`https://tiktok-transcript.p.rapidapi.com/transcribe-tiktok-audio`

**æ–¹æ³•**ï¼šPOST

**Headers**ï¼š
```
Content-Type: application/x-www-form-urlencoded
x-rapidapi-host: tiktok-transcript.p.rapidapi.com
x-rapidapi-key: {API_KEY}
```

**Body**ï¼ˆform-urlencodedï¼‰ï¼š
```
url=https://www.tiktok.com/@username/video/1234567890
```

**è¶…æ—¶**ï¼š20ç§’

---

## ğŸ” å¤±è´¥åˆ¤æ–­æ ‡å‡†

### å…è´¹APIå¤±è´¥æ¡ä»¶

| åœºæ™¯ | HTTPçŠ¶æ€ | åˆ¤æ–­æ¡ä»¶ | åŠ¨ä½œ |
|------|---------|---------|------|
| é™æµ | 429 | `status === 429` | åˆ‡æ¢API 2 |
| é¢åº¦ç”¨å®Œ | 403 | `status === 403` | åˆ‡æ¢API 2 |
| é¢åº¦ç”¨å®Œ | 200 | é”™è¯¯ä¿¡æ¯åŒ…å«"quota"/"limit" | åˆ‡æ¢API 2 |
| æ— transcript | 200 | transcript/subtitle/textä¸ºç©º | åˆ‡æ¢API 2 |
| æ— æ•ˆå“åº” | 200 | transcripté•¿åº¦ < 100å­—ç¬¦ | åˆ‡æ¢API 2 |
| è¶…æ—¶ | - | 15ç§’è¶…æ—¶ | åˆ‡æ¢API 2 |
| ç½‘ç»œé”™è¯¯ | - | ç½‘ç»œå¼‚å¸¸ | åˆ‡æ¢API 2 |

### ä»˜è´¹APIå¤±è´¥æ¡ä»¶

| åœºæ™¯ | HTTPçŠ¶æ€ | åˆ¤æ–­æ¡ä»¶ | åŠ¨ä½œ |
|------|---------|---------|------|
| HTTPé”™è¯¯ | é200 | `!response.ok` | è¿”å›é”™è¯¯ |
| æ— transcription | 200 | transcriptionä¸ºç©º | è¿”å›é”™è¯¯ |
| è§†é¢‘ä¸å­˜åœ¨ | 200 | é”™è¯¯ä¿¡æ¯åŒ…å«"video not found" | è¿”å›é”™è¯¯ |
| ç§æœ‰è§†é¢‘ | 200 | é”™è¯¯ä¿¡æ¯åŒ…å«"private video" | è¿”å›é”™è¯¯ |
| æ— å­—å¹• | 200 | é”™è¯¯ä¿¡æ¯åŒ…å«"no subtitle" | è¿”å›é”™è¯¯ |
| è¶…æ—¶ | - | 20ç§’è¶…æ—¶ | è¿”å›é”™è¯¯ |

---

## ğŸ¯ å…³é”®ç‰¹æ€§

### 1. ä¸ç ´åshipanyç»“æ„

- âœ… æ‰€æœ‰ä¿®æ”¹éƒ½åœ¨ `RapidAPIProvider` ç±»å†…éƒ¨
- âœ… å¯¹å¤–æ¥å£ `fetchMedia()` ä¿æŒä¸å˜
- âœ… è¿”å›æ ¼å¼ `NormalizedMediaData` ä¿æŒä¸å˜
- âœ… ç°æœ‰è°ƒç”¨ä»£ç æ— éœ€ä¿®æ”¹

### 2. ä¸¥æ ¼çš„è°ƒç”¨æ§åˆ¶

- âœ… æ¯ä¸ªAPIåªè°ƒç”¨1æ¬¡
- âœ… æˆåŠŸç«‹å³è¿”å›ï¼Œä¸å†è°ƒç”¨ä¸‹ä¸€ä¸ª
- âœ… å¤±è´¥æ‰åˆ‡æ¢ï¼Œç»ä¸é‡è¯•

### 3. å®Œå–„çš„é”™è¯¯å¤„ç†

- âœ… HTTPå±‚é¢é”™è¯¯åˆ¤æ–­
- âœ… ä¸šåŠ¡å±‚é¢é”™è¯¯åˆ¤æ–­
- âœ… æ•°æ®å±‚é¢é”™è¯¯åˆ¤æ–­
- âœ… è¶…æ—¶æ§åˆ¶
- âœ… ç½‘ç»œé”™è¯¯å¤„ç†

### 4. æ—¥å¿—è®°å½•

- âœ… è®°å½•APIè°ƒç”¨å°è¯•
- âœ… è®°å½•æˆåŠŸ/å¤±è´¥åŸå› 
- âœ… ä¾¿äºè°ƒè¯•å’Œç›‘æ§

---

## ğŸ“Š è°ƒç”¨æµç¨‹

```
ç”¨æˆ·è¯·æ±‚
  â†“
fetchMedia(url, 'subtitle')
  â†“
fetchTikTokMedia(url)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å…è´¹API (åªè°ƒç”¨1æ¬¡)     â”‚
â”‚ - 15ç§’è¶…æ—¶              â”‚
â”‚ - POST JSONæ ¼å¼         â”‚
â”‚ - ä¸¥æ ¼å¤±è´¥åˆ¤æ–­          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
  â”œâ”€ æˆåŠŸ â†’ è¿”å›ç»“æœ â†’ ç»“æŸ
  â”‚
  â””â”€ å¤±è´¥ â†’ åˆ‡æ¢ä»˜è´¹API
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»˜è´¹API (åªè°ƒç”¨1æ¬¡)     â”‚
â”‚ - 20ç§’è¶…æ—¶              â”‚
â”‚ - POST form-urlencoded  â”‚
â”‚ - ä¸¥æ ¼å¤±è´¥åˆ¤æ–­          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
  â”œâ”€ æˆåŠŸ â†’ è¿”å›ç»“æœ â†’ ç»“æŸ
  â”‚
  â””â”€ å¤±è´¥ â†’ æŠ›å‡ºé”™è¯¯
```

---

## ğŸ”„ ä¸YouTubeå®ç°çš„å¯¹æ¯”

| ç‰¹æ€§ | YouTubeå®ç° | TikTokå®ç° | ä¸€è‡´æ€§ |
|------|------------|-----------|--------|
| **é™çº§ç­–ç•¥** | âœ… å…è´¹â†’ä»˜è´¹ | âœ… å…è´¹â†’ä»˜è´¹ | âœ… ä¸€è‡´ |
| **è°ƒç”¨æ§åˆ¶** | âœ… åªè°ƒç”¨1æ¬¡ | âœ… åªè°ƒç”¨1æ¬¡ | âœ… ä¸€è‡´ |
| **è¶…æ—¶æ§åˆ¶** | âœ… 15s/20s | âœ… 15s/20s | âœ… ä¸€è‡´ |
| **å¤±è´¥åˆ¤æ–­** | âœ… ä¸¥æ ¼åˆ¤æ–­ | âœ… ä¸¥æ ¼åˆ¤æ–­ | âœ… ä¸€è‡´ |
| **æ—¥å¿—è®°å½•** | âœ… å®Œæ•´æ—¥å¿— | âœ… å®Œæ•´æ—¥å¿— | âœ… ä¸€è‡´ |
| **APIæ ¼å¼** | GET/POST | POST/POST | âš ï¸ ä¸åŒ |
| **Bodyæ ¼å¼** | JSON | JSON/form-urlencoded | âš ï¸ ä¸åŒ |

**å…³é”®å·®å¼‚**ï¼š
- TikTok API 2ä½¿ç”¨ `form-urlencoded` æ ¼å¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
- TikTokè§†é¢‘é€šå¸¸è¾ƒçŸ­ï¼Œæœ€å°transcripté•¿åº¦é˜ˆå€¼è®¾ä¸º100å­—ç¬¦ï¼ˆYouTubeä¸º300å­—ç¬¦ï¼‰

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### 1. æˆåŠŸåœºæ™¯æµ‹è¯•

```typescript
// æµ‹è¯•1: å…è´¹APIæˆåŠŸ
// è¾“å…¥ï¼šæœ‰æ•ˆçš„TikTok URL
// é¢„æœŸï¼šä½¿ç”¨å…è´¹APIè¿”å›ç»“æœï¼Œä¸è°ƒç”¨ä»˜è´¹API

// æµ‹è¯•2: å…è´¹APIå¤±è´¥ï¼Œä»˜è´¹APIæˆåŠŸ
// è¾“å…¥ï¼šå…è´¹APIè¿”å›429
// é¢„æœŸï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä»˜è´¹APIå¹¶è¿”å›ç»“æœ
```

### 2. å¤±è´¥åœºæ™¯æµ‹è¯•

```typescript
// æµ‹è¯•3: ä¸¤ä¸ªAPIéƒ½å¤±è´¥
// è¾“å…¥ï¼šä¸¤ä¸ªAPIéƒ½è¿”å›é”™è¯¯
// é¢„æœŸï¼šæŠ›å‡ºæ˜ç¡®çš„é”™è¯¯ä¿¡æ¯

// æµ‹è¯•4: è¶…æ—¶æµ‹è¯•
// è¾“å…¥ï¼šAPIå“åº”è¶…è¿‡15ç§’
// é¢„æœŸï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä»˜è´¹API
```

### 3. è¾¹ç•Œåœºæ™¯æµ‹è¯•

```typescript
// æµ‹è¯•5: å…è´¹APIè¿”å›ç©ºtranscript
// é¢„æœŸï¼šåˆ‡æ¢åˆ°ä»˜è´¹API

// æµ‹è¯•6: ä»˜è´¹APIè¿”å›form-urlencodedæ ¼å¼é”™è¯¯
// é¢„æœŸï¼šæ­£ç¡®å¤„ç†form-urlencodedæ ¼å¼
```

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹

```typescript
// ç°æœ‰è°ƒç”¨ä»£ç ä¿æŒä¸å˜
const rapidAPI = getRapidAPIService();
const mediaData = await rapidAPI.fetchMedia(url, 'subtitle');

// è¿”å›æ ¼å¼ä¿æŒä¸å˜
// mediaData.subtitleRaw åŒ…å«è½¬å½•æ–‡æœ¬
// mediaData.metadata åŒ…å«å…ƒæ•°æ®
```

### æ—¥å¿—è¾“å‡ºç¤ºä¾‹

```
[TikTok Transcript] Attempting Free API...
[TikTok Transcript] Free API succeeded!
```

æˆ–

```
[TikTok Transcript] Attempting Free API...
[TikTok Transcript] Free API failed: RATE_LIMIT - Free API rate limit exceeded
[TikTok Transcript] Switching to Paid API as fallback...
[TikTok Transcript] Paid API succeeded!
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ï¼ˆæ— éœ€æ–°å¢ï¼‰

ä½¿ç”¨ç°æœ‰çš„RapidAPIé…ç½®ï¼š
```env
NEXT_PUBLIC_RAPIDAPI_KEY=558c577f30msh4f4e14fdc702b0cp1cf611jsn339fa91dba2b
```

### è¶…æ—¶é…ç½®ï¼ˆä»£ç ä¸­ç¡¬ç¼–ç ï¼‰

- å…è´¹APIè¶…æ—¶ï¼š15ç§’
- ä»˜è´¹APIè¶…æ—¶ï¼š20ç§’
- æœ€å°transcripté•¿åº¦ï¼š100å­—ç¬¦ï¼ˆTikTokè§†é¢‘é€šå¸¸è¾ƒçŸ­ï¼‰

å¦‚éœ€è°ƒæ•´ï¼Œä¿®æ”¹ `fetchTikTokTranscriptFreeAPI()` å’Œ `fetchTikTokTranscriptPaidAPI()` æ–¹æ³•ä¸­çš„å¸¸é‡ã€‚

---

## ğŸ”„ åç»­ä¼˜åŒ–å»ºè®®

### Phase 2ï¼ˆå¯é€‰ï¼‰

1. **ç¼“å­˜æœºåˆ¶**
   - å¯¹æˆåŠŸçš„transcriptç»“æœè¿›è¡Œç¼“å­˜
   - é¿å…é‡å¤è°ƒç”¨ç›¸åŒè§†é¢‘

2. **ç›‘æ§æŒ‡æ ‡**
   - è®°å½•å…è´¹APIæˆåŠŸç‡
   - è®°å½•ä»˜è´¹APIè°ƒç”¨æ¬¡æ•°
   - ç›‘æ§æˆæœ¬

3. **é…ç½®åŒ–**
   - å°†è¶…æ—¶æ—¶é—´ç§»åˆ°é…ç½®æ–‡ä»¶
   - å°†æœ€å°é•¿åº¦ç§»åˆ°é…ç½®æ–‡ä»¶

---

## âœ… éªŒè¯æ¸…å•

- [x] ä»£ç ç¼–è¯‘é€šè¿‡
- [x] æ— linté”™è¯¯
- [x] ä¿æŒshipanyç»“æ„ä¸å˜
- [x] å¯¹å¤–æ¥å£ä¸å˜
- [x] è¿”å›æ ¼å¼ä¸å˜
- [x] å®ç°é™çº§ç­–ç•¥
- [x] ä¸¥æ ¼è°ƒç”¨æ§åˆ¶ï¼ˆæ¯ä¸ªAPIåªè°ƒç”¨1æ¬¡ï¼‰
- [x] è¶…æ—¶æ§åˆ¶
- [x] å¤±è´¥åˆ¤æ–­é€»è¾‘
- [x] æ—¥å¿—è®°å½•
- [x] æ­£ç¡®å¤„ç†form-urlencodedæ ¼å¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `YOUTUBE_TRANSCRIPT_FALLBACK_STRATEGY.md` - YouTubeé™çº§ç­–ç•¥æ–¹æ¡ˆ
- `YOUTUBE_TRANSCRIPT_FALLBACK_IMPLEMENTATION.md` - YouTubeå®ç°æ–‡æ¡£

---

**å®ç°å®Œæˆæ—¶é—´**ï¼š2024å¹´
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆï¼Œå¾…æµ‹è¯•éªŒè¯

**ä¸‹ä¸€æ­¥**ï¼š
1. æµ‹è¯•å…è´¹APIå’Œä»˜è´¹APIçš„è°ƒç”¨
2. éªŒè¯é™çº§é€»è¾‘æ˜¯å¦æ­£ç¡®å·¥ä½œ
3. ç›‘æ§APIè°ƒç”¨æˆåŠŸç‡
4. ä¼˜åŒ–é”™è¯¯å¤„ç†ï¼ˆå¦‚éœ€è¦ï¼‰



